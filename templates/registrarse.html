<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CineKo - Registrarse</title>
  <link rel="stylesheet" href="/static/css/style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Krub:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700&family=Staatliches&display=swap"
    rel="stylesheet" />
  <link rel="preload" href="/static/css/normalize.css" as="style" />
  <link href="/static/css/normalize.css" rel="stylesheet" />
  <link rel="preload" href="/static/css/style.css" as="style" />
  <link rel="icon" href="/static/img/logo2.png" type="image/x-icon" />
  <link rel="shortcut icon" href="/static/img/logo2.png" type="image/x-icon" />
</head>

<body>
  <nav class="nav-bg">
    <a href="http://127.0.0.1:5500/templates/index.html">CINEKO</a>
    <a href="http://127.0.0.1:5500/templates/cartelera.html">CARTELERA</a>
    <a href="http://127.0.0.1:5500/templates/comidas.html">CONFITERIA</a>
    <a href="http://127.0.0.1:5500/templates/membresias.html">MEMBRESIAS</a>
    <a href="http://127.0.0.1:5500/templates/promociones.html">PROMOCIONES</a>
    <a href="http://127.0.0.1:5500/templates/ingresar.html">
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user-filled" width="20" height="20"
        viewBox="0 0 24 24" stroke-width="1.5" stroke="#c2b284" fill="none" stroke-linecap="round"
        stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M12 2a5 5 0 1 1 -5 5l.005 -.217a5 5 0 0 1 4.995 -4.783z" stroke-width="0" fill="currentColor" />
        <path d="M14 14a5 5 0 0 1 5 5v1a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-1a5 5 0 0 1 5 -5h4z" stroke-width="0"
          fill="currentColor" />
      </svg>
      INGRESAR
    </a>
  </nav>
  <main class="imgRegistrarse">
    <div class="Registrarse">
      <form class="formulario" action="http://127.0.0.1:5000/register" method="POST" onsubmit="return validateForm()">
        <fieldset>
          <legend>Registrarse</legend>
          <div class="contenedor-campos">
            <div class="campos">
              <label for="nombre">Nombre</label>
              <input id="nombre" name="nombre" class="input-text" type="text" placeholder="Tu Nombre"
                oninput="validateNombre()" />
              <span id="nombre-error" class="error-message"></span>
            </div>
            <div class="campos">
              <label for="apellido">Primer Apellido</label>
              <input id="apellido" name="apellido" class="input-text" type="text" placeholder="Tu Primer Apellido"
                oninput="validateApellido()" />
              <span id="apellido-error" class="error-message"></span>
            </div>
            <div class="campos">
              <label for="correo">Correo Electrónico</label>
              <input id="correo" name="correo" class="input-text" type="email" placeholder="Tu Correo Electrónico"
                oninput="validateCorreo()" />
              <span id="correo-error" class="error-message"></span>
            </div>
            <div class="campos ccontraseña">
              <label for="contrasena">Contraseña</label>
              <input id="contrasena" name="contrasena" class="input-text" type="password" placeholder="Tu Contraseña"
                oninput="validateContrasena()" />
              <span id="contrasena-error" class="error-message"></span>
            </div>
            <div class="campos">
              <label for="repetir-contrasena">Repite la Contraseña</label>
              <input id="repetir-contrasena" name="repetir_contrasena" class="input-text" type="password"
                placeholder="Tu Contraseña Nuevamente" oninput="validateRepetirContrasena()" />
              <span id="repetir-contrasena-error" class="error-message"></span>
            </div>
          </div>
          <div class="InicioSesion">
            <input class="boton enviar" type="submit" value="Registrarse" />
          </div>
        </fieldset>
      </form>
    </div>
    <footer class="footer">
      <p>Copyright © 2024 CineKo Real. All Rights Reserved</p>
    </footer>
  </main>
  <script>
    function validateNombre() {
      const nombre = document.getElementById("nombre").value.trim();
      const nombreError = document.getElementById("nombre-error");
      nombreError.textContent = "";
      const nombreRegex = /^[a-zA-Z\s]+$/;

      if (nombre.length < 2 || nombre.length > 50) {
        nombreError.textContent = "El nombre debe tener entre 2 y 50 caracteres.";
        return false;
      }

      if (!nombreRegex.test(nombre)) {
        nombreError.textContent = "El nombre solo puede contener letras y espacios.";
        return false;
      }

      return true;
    }

    function validateApellido() {
      const apellido = document.getElementById("apellido").value.trim();
      const apellidoError = document.getElementById("apellido-error");
      apellidoError.textContent = "";
      const apellidoRegex = /^[a-zA-Z\s]+$/;

      if (apellido.length < 2 || apellido.length > 50) {
        apellidoError.textContent = "El apellido debe tener entre 2 y 50 caracteres.";
        return false;
      }

      if (!apellidoRegex.test(apellido)) {
        apellidoError.textContent = "El apellido solo puede contener letras y espacios.";
        return false;
      }

      return true;
    }

    function validateCorreo() {
      const correo = document.getElementById("correo").value.trim();
      const correoError = document.getElementById("correo-error");
      correoError.textContent = "";
      const correoRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      if (!correoRegex.test(correo)) {
        correoError.textContent = "El formato del correo electrónico no es válido.";
        return false;
      }

      return true;
    }

    function validateContrasena() {
      const contrasena = document.getElementById("contrasena").value.trim();
      const contrasenaError = document.getElementById("contrasena-error");
      contrasenaError.textContent = "";

      if (contrasena.length < 8 || contrasena.length > 20) {
        contrasenaError.textContent = "La contraseña debe tener entre 8 y 20 caracteres.";
        return false;
      }

      const contrasenaFuerteRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
      if (!contrasenaFuerteRegex.test(contrasena)) {
        contrasenaError.textContent = "La contraseña debe incluir al menos una letra mayúscula, una minúscula, un número y un carácter especial.";
        return false;
      }

      return true;
    }

    function validateRepetirContrasena() {
      const contrasena = document.getElementById("contrasena").value.trim();
      const repetirContrasena = document.getElementById("repetir-contrasena").value.trim();
      const repetirContrasenaError = document.getElementById("repetir-contrasena-error");
      repetirContrasenaError.textContent = "";

      if (contrasena !== repetirContrasena) {
        repetirContrasenaError.textContent = "Las contraseñas no coinciden.";
        return false;
      }

      return true;
    }

    function validateForm() {
      const isNombreValid = validateNombre();
      const isApellidoValid = validateApellido();
      const isCorreoValid = validateCorreo();
      const isContrasenaValid = validateContrasena();
      const isRepetirContrasenaValid = validateRepetirContrasena();

      return isNombreValid && isApellidoValid && isCorreoValid && isContrasenaValid && isRepetirContrasenaValid;
    }
  </script>
</body>

</html>
